# ğŸ“„ é–‹ç™ºã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ - Business Communication Trainer (Day 13ç”¨)

**ä½œæˆæ—¥**: 2025å¹´10æœˆ26æ—¥
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v2.5ï¼ˆãƒ‡ãƒ¼ã‚¿ä¿å­˜æ©Ÿèƒ½å®Ÿè£…ç‰ˆï¼‰
**ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Day 12å®Œäº† âœ… + Firestoreãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®Ÿè£…å®Œäº† âœ… â†’ Day 13æº–å‚™å®Œäº†

---

## ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºæœ¬æƒ…å ±

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒªãƒã‚¸ãƒˆãƒª** | https://github.com/fanta1127/business-communication-trainer/ |
| **ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒ** | `day10-development-build` |
| **é€²æ—** | Day 12/21 å®Œäº† (57.1%) |
| **æ¬¡å›** | Day 13 - ãƒ‡ãƒ¼ã‚¿ä¿å­˜æ©Ÿèƒ½å®Ÿè£… |
| **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯** | React Native + Expo SDK 54 / Firebase / OpenAI API |

---

## ğŸ¯ Day 13: ãƒ‡ãƒ¼ã‚¿ä¿å­˜æ©Ÿèƒ½å®Ÿè£…

### **ç›®æ¨™**
ç·´ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†æ™‚ã«Firestoreã¸è‡ªå‹•ä¿å­˜ã™ã‚‹æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒéå»ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’æŒ¯ã‚Šè¿”ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

### **å®Ÿè£…å†…å®¹**
1. **FeedbackScreenå®Ÿè£…**: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è¡¨ç¤ºã¨ä¿å­˜æ©Ÿèƒ½
2. **SessionContextã¸ã®çµ±åˆ**: Firestoreä¿å­˜æ©Ÿèƒ½ã®è¿½åŠ 
3. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãƒ»æ¨©é™ã‚¨ãƒ©ãƒ¼ã¸ã®å¯¾å¿œ
4. **ãƒ†ã‚¹ãƒˆ**: ä¿å­˜æ©Ÿèƒ½ã®å‹•ä½œç¢ºèª

---

## ğŸ‰ Week 2é€²æ—çŠ¶æ³

```
Week 1: åŸºç›¤æ§‹ç¯‰ (100%å®Œäº†!) âœ…
â”œâ”€ Day 1-4: ç’°å¢ƒ/èªè¨¼/ç”»é¢ âœ…
â”œâ”€ Day 5: å ´é¢ãƒ‡ãƒ¼ã‚¿/SessionContext âœ…
â”œâ”€ Day 6: éŸ³å£°éŒ²éŸ³æ©Ÿèƒ½ âœ…
â”œâ”€ Day 7: ç·´ç¿’ç”»é¢ã®å®Œæˆ âœ…
â””â”€ Day 8: OpenAI APIï¼ˆè³ªå•ç”Ÿæˆï¼‰âœ…

Week 2: AIçµ±åˆ + ãƒ‡ãƒ¼ã‚¿ç®¡ç† (85.7%å®Œäº†)
â”œâ”€ Day 9: ã‚²ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰å»ƒæ­¢ + ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯API âœ…
â”œâ”€ Day 10: Android Development Build âœ…
â”œâ”€ Day 10.5: iOSå®Ÿæ©Ÿãƒ†ã‚¹ãƒˆç’°å¢ƒæ§‹ç¯‰ âœ…
â”œâ”€ Day 11: éŸ³å£°æ–‡å­—èµ·ã“ã—æ©Ÿèƒ½ï¼ˆWhisper APIï¼‰âœ…
â”œâ”€ Day 12: Firestoreãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ« âœ…
â”œâ”€ Day 13: ãƒ‡ãƒ¼ã‚¿ä¿å­˜æ©Ÿèƒ½ â³ â† æ¬¡å›
â””â”€ Day 14: å±¥æ­´æ©Ÿèƒ½ â³

å…¨ä½“é€²æ—: 12/21æ—¥ (57.1%)
```

---

## ğŸŠ Day 12ã®ä¸»è¦æˆæœï¼ˆå®Œäº†ï¼‰

### âœ… Firestoreãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®Ÿè£…å®Œå…¨æˆåŠŸ

**é”æˆå†…å®¹**:
- âœ… firestoreService.jsä½œæˆï¼ˆå…¨8é–¢æ•°å®Ÿè£…ï¼‰
- âœ… Firestoreã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«è¨­å®š
- âœ… Firestoreã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­å®š
- âœ… Firebase ãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸ
- âœ… ãƒ†ã‚¹ãƒˆå®Œäº†ï¼ˆä¿å­˜ãƒ»å–å¾—ãƒ»å‰Šé™¤ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼‰

**GitHubã‚³ãƒŸãƒƒãƒˆ**:
```
ã‚³ãƒŸãƒƒãƒˆID: 4fc460a
ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: [feat] Day 12: Firestoreãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®Ÿè£…
```

**åˆ©ç”¨å¯èƒ½ãªé–¢æ•°**:
```javascript
// src/services/firestoreService.js
import {
  saveSession,           // ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜
  getUserSessions,       // ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§å–å¾—
  getSession,            // ç‰¹å®šã‚»ãƒƒã‚·ãƒ§ãƒ³å–å¾—
  deleteSession,         // ã‚»ãƒƒã‚·ãƒ§ãƒ³å‰Šé™¤
  getSessionCount,       // ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°å–å¾—
  createUserProfile,     // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
  getFirestoreErrorMessage // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å¤‰æ›
} from '../services/firestoreService';
```

---

## ğŸ“‚ ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ï¼ˆDay 12å®Œäº†æ™‚ç‚¹ï¼‰

```
BusinessTrainer/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ PracticeScreen.js âœ… (è³ªå•ç”Ÿæˆãƒ»å›ç­”å…¥åŠ›å®Œäº†)
â”‚   â”‚   â””â”€â”€ FeedbackScreen.js â³ Day 13å®Ÿè£…äºˆå®š â† æ¬¡å›
â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â””â”€â”€ SessionContext.js âœ… (Day 13ã§æ‹¡å¼µäºˆå®š)
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ firestoreService.js âœ… (Day 12ã§å®Ÿè£…å®Œäº†)
```

---

## ğŸ“‹ Day 13å®Ÿè£…ã‚¿ã‚¹ã‚¯

### **ã‚¿ã‚¹ã‚¯1: FeedbackScreenå®Ÿè£…ï¼ˆ2-3æ™‚é–“ï¼‰**

#### **1-1. FeedbackScreenåŸºæœ¬UIä½œæˆ**

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/screens/FeedbackScreen.js`

**å®Ÿè£…å†…å®¹**:
```javascript
// src/screens/FeedbackScreen.js
import React, { useState, useEffect } from 'react';
import {
  View,
  Text,
  ScrollView,
  TouchableOpacity,
  StyleSheet,
  Alert,
  ActivityIndicator
} from 'react-native';
import { useSession } from '../contexts/SessionContext';
import { useAuth } from '../contexts/AuthContext';
import { useNavigation } from '@react-navigation/native';

export default function FeedbackScreen() {
  const { currentSession, resetSession } = useSession();
  const { user } = useAuth();
  const navigation = useNavigation();
  const [saving, setSaving] = useState(false);
  const [saveError, setSaveError] = useState(null);

  // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
  const feedback = currentSession.feedback;

  // è‡ªå‹•ä¿å­˜ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  useEffect(() => {
    // Day 13ã§å®Ÿè£…
  }, []);

  return (
    <ScrollView style={styles.container}>
      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
      <View style={styles.header}>
        <Text style={styles.title}>ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼</Text>
        <Text style={styles.subtitle}>
          {currentSession.sceneName}ã®ç·´ç¿’ã‚’å®Œäº†ã—ã¾ã—ãŸ
        </Text>
      </View>

      {/* ã‚µãƒãƒªãƒ¼ */}
      <View style={styles.summarySection}>
        <Text style={styles.summaryText}>{feedback.summary}</Text>
      </View>

      {/* è‰¯ã‹ã£ãŸç‚¹ */}
      <View style={styles.section}>
        <Text style={styles.sectionTitle}>âœ… è‰¯ã‹ã£ãŸç‚¹</Text>
        {feedback.goodPoints.map((point, index) => (
          <View key={index} style={styles.pointCard}>
            <Text style={styles.pointAspect}>{point.aspect}</Text>
            {point.quote && (
              <View style={styles.quoteContainer}>
                <Text style={styles.quote}>"{point.quote}"</Text>
              </View>
            )}
            <Text style={styles.pointComment}>{point.comment}</Text>
          </View>
        ))}
      </View>

      {/* æ”¹å–„ç‚¹ */}
      <View style={styles.section}>
        <Text style={styles.sectionTitle}>ğŸ’¡ æ”¹å–„ã®ãƒ’ãƒ³ãƒˆ</Text>
        {feedback.improvementPoints.map((point, index) => (
          <View key={index} style={styles.pointCard}>
            <Text style={styles.pointAspect}>{point.aspect}</Text>

            <View style={styles.comparisonContainer}>
              <View style={styles.beforeContainer}>
                <Text style={styles.beforeLabel}>æ”¹å–„å‰:</Text>
                <Text style={styles.beforeText}>{point.original}</Text>
              </View>

              <View style={styles.afterContainer}>
                <Text style={styles.afterLabel}>æ”¹å–„å¾Œ:</Text>
                <Text style={styles.afterText}>{point.improved}</Text>
              </View>
            </View>

            <Text style={styles.pointReason}>{point.reason}</Text>
          </View>
        ))}
      </View>

      {/* åŠ±ã¾ã— */}
      <View style={styles.encouragementSection}>
        <Text style={styles.encouragementText}>{feedback.encouragement}</Text>
      </View>

      {/* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */}
      <View style={styles.actionsContainer}>
        {/* ä¿å­˜ãƒœã‚¿ãƒ³ï¼ˆDay 13ã§å®Ÿè£…ï¼‰ */}

        {/* å†ç·´ç¿’ãƒœã‚¿ãƒ³ */}
        <TouchableOpacity
          style={styles.retryButton}
          onPress={() => {
            resetSession();
            navigation.navigate('SceneSelection');
          }}
        >
          <Text style={styles.retryButtonText}>ã‚‚ã†ä¸€åº¦ç·´ç¿’</Text>
        </TouchableOpacity>

        {/* ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹ */}
        <TouchableOpacity
          style={styles.homeButton}
          onPress={() => {
            resetSession();
            navigation.navigate('Home');
          }}
        >
          <Text style={styles.homeButtonText}>ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</Text>
        </TouchableOpacity>
      </View>

      <View style={{ height: 40 }} />
    </ScrollView>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#f5f5f5',
  },
  header: {
    backgroundColor: '#4CAF50',
    padding: 24,
    alignItems: 'center',
  },
  title: {
    fontSize: 28,
    fontWeight: 'bold',
    color: '#fff',
    marginBottom: 8,
  },
  subtitle: {
    fontSize: 16,
    color: '#fff',
    opacity: 0.9,
  },
  summarySection: {
    backgroundColor: '#fff',
    padding: 20,
    marginTop: 16,
    marginHorizontal: 16,
    borderRadius: 12,
    borderLeftWidth: 4,
    borderLeftColor: '#2196F3',
  },
  summaryText: {
    fontSize: 16,
    color: '#333',
    lineHeight: 24,
  },
  section: {
    marginTop: 16,
    marginHorizontal: 16,
  },
  sectionTitle: {
    fontSize: 20,
    fontWeight: 'bold',
    color: '#333',
    marginBottom: 12,
  },
  pointCard: {
    backgroundColor: '#fff',
    padding: 16,
    borderRadius: 12,
    marginBottom: 12,
  },
  pointAspect: {
    fontSize: 16,
    fontWeight: 'bold',
    color: '#2196F3',
    marginBottom: 8,
  },
  quoteContainer: {
    backgroundColor: '#f0f0f0',
    padding: 12,
    borderRadius: 8,
    marginBottom: 8,
    borderLeftWidth: 3,
    borderLeftColor: '#4CAF50',
  },
  quote: {
    fontSize: 14,
    color: '#666',
    fontStyle: 'italic',
  },
  pointComment: {
    fontSize: 14,
    color: '#666',
    lineHeight: 20,
  },
  comparisonContainer: {
    marginVertical: 8,
  },
  beforeContainer: {
    backgroundColor: '#ffebee',
    padding: 12,
    borderRadius: 8,
    marginBottom: 8,
  },
  beforeLabel: {
    fontSize: 12,
    fontWeight: 'bold',
    color: '#f44336',
    marginBottom: 4,
  },
  beforeText: {
    fontSize: 14,
    color: '#333',
  },
  afterContainer: {
    backgroundColor: '#e8f5e9',
    padding: 12,
    borderRadius: 8,
  },
  afterLabel: {
    fontSize: 12,
    fontWeight: 'bold',
    color: '#4CAF50',
    marginBottom: 4,
  },
  afterText: {
    fontSize: 14,
    color: '#333',
  },
  pointReason: {
    fontSize: 13,
    color: '#666',
    marginTop: 8,
    lineHeight: 18,
  },
  encouragementSection: {
    backgroundColor: '#fff3e0',
    padding: 20,
    marginTop: 16,
    marginHorizontal: 16,
    borderRadius: 12,
    borderWidth: 2,
    borderColor: '#FF9800',
  },
  encouragementText: {
    fontSize: 16,
    color: '#333',
    textAlign: 'center',
    lineHeight: 24,
    fontWeight: '500',
  },
  actionsContainer: {
    marginTop: 24,
    marginHorizontal: 16,
  },
  retryButton: {
    backgroundColor: '#2196F3',
    padding: 16,
    borderRadius: 12,
    alignItems: 'center',
    marginBottom: 12,
  },
  retryButtonText: {
    color: '#fff',
    fontSize: 16,
    fontWeight: 'bold',
  },
  homeButton: {
    backgroundColor: '#fff',
    padding: 16,
    borderRadius: 12,
    alignItems: 'center',
    borderWidth: 2,
    borderColor: '#e0e0e0',
  },
  homeButtonText: {
    color: '#666',
    fontSize: 16,
    fontWeight: 'bold',
  },
});
```

---

#### **1-2. SessionContextã«ä¿å­˜æ©Ÿèƒ½ã‚’è¿½åŠ **

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/contexts/SessionContext.js`

**è¿½åŠ ã™ã‚‹æ©Ÿèƒ½**:
```javascript
// src/contexts/SessionContext.js
import { saveSession } from '../services/firestoreService';
import { useAuth } from './AuthContext';

// SessionContextã«è¿½åŠ 
const [saving, setSaving] = useState(false);
const [saveError, setSaveError] = useState(null);

// ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’Firestoreã«ä¿å­˜
const saveSessionToFirestore = async () => {
  try {
    setSaving(true);
    setSaveError(null);

    console.log('[Session] Saving session to Firestore...');

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’å–å¾—
    const userId = user.uid;

    // ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™
    const sessionData = {
      sceneId: currentSession.sceneId,
      sceneName: currentSession.sceneName,
      qaList: currentSession.qaList,
      feedback: currentSession.feedback,
      duration: currentSession.duration || 0,
    };

    // Firestoreã«ä¿å­˜
    const sessionId = await saveSession(userId, sessionData);

    console.log('[Session] Session saved:', sessionId);

    return sessionId;

  } catch (error) {
    console.error('[Session] Save error:', error);
    setSaveError(error.message);
    throw error;
  } finally {
    setSaving(false);
  }
};

// Context Providerã«è¿½åŠ 
<SessionContext.Provider value={{
  // æ—¢å­˜ã®å€¤
  currentSession,
  setCurrentSession,
  resetSession,
  // æ–°è¦è¿½åŠ 
  saveSessionToFirestore,
  saving,
  saveError,
}}>
```

---

#### **1-3. FeedbackScreenã«ä¿å­˜ãƒœã‚¿ãƒ³ã‚’è¿½åŠ **

**ä¿å­˜ãƒœã‚¿ãƒ³ã®å®Ÿè£…**:
```javascript
// FeedbackScreen.js ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã‚»ã‚¯ã‚·ãƒ§ãƒ³
import { useSession } from '../contexts/SessionContext';

const { saveSessionToFirestore, saving, saveError } = useSession();

const handleSave = async () => {
  try {
    const sessionId = await saveSessionToFirestore();

    Alert.alert(
      'ä¿å­˜å®Œäº†',
      'ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚\nå±¥æ­´ã‹ã‚‰ç¢ºèªã§ãã¾ã™ã€‚',
      [
        {
          text: 'å±¥æ­´ã‚’è¦‹ã‚‹',
          onPress: () => navigation.navigate('History'),
        },
        {
          text: 'OK',
          style: 'cancel',
        }
      ]
    );
  } catch (error) {
    Alert.alert(
      'ä¿å­˜ã‚¨ãƒ©ãƒ¼',
      'ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n\n' + error.message,
      [{ text: 'OK' }]
    );
  }
};

// JSXå†…
<TouchableOpacity
  style={[styles.saveButton, saving && styles.saveButtonDisabled]}
  onPress={handleSave}
  disabled={saving}
>
  {saving ? (
    <ActivityIndicator size="small" color="#fff" />
  ) : (
    <Text style={styles.saveButtonText}>ğŸ“ å±¥æ­´ã«ä¿å­˜</Text>
  )}
</TouchableOpacity>

// ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ 
saveButton: {
  backgroundColor: '#4CAF50',
  padding: 16,
  borderRadius: 12,
  alignItems: 'center',
  marginBottom: 12,
  flexDirection: 'row',
  justifyContent: 'center',
},
saveButtonDisabled: {
  backgroundColor: '#9E9E9E',
},
saveButtonText: {
  color: '#fff',
  fontSize: 16,
  fontWeight: 'bold',
},
```

---

### **ã‚¿ã‚¹ã‚¯2: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆ1æ™‚é–“ï¼‰**

#### **2-1. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼å¯¾å¿œ**

```javascript
// SessionContext.js
const saveSessionToFirestore = async () => {
  try {
    setSaving(true);
    setSaveError(null);

    // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç¢ºèªï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
    // const netInfo = await NetInfo.fetch();
    // if (!netInfo.isConnected) {
    //   throw new Error('ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒã‚ã‚Šã¾ã›ã‚“');
    // }

    const userId = user.uid;
    const sessionData = { ... };

    const sessionId = await saveSession(userId, sessionData);

    return sessionId;

  } catch (error) {
    console.error('[Session] Save error:', error);

    // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®åˆ†é¡
    let userMessage = error.message;

    if (error.message.includes('network') || error.message.includes('Network')) {
      userMessage = 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚';
    } else if (error.message.includes('permission')) {
      userMessage = 'ãƒ‡ãƒ¼ã‚¿ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚';
    }

    setSaveError(userMessage);
    throw new Error(userMessage);
  } finally {
    setSaving(false);
  }
};
```

---

#### **2-2. ä¿å­˜ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½**

```javascript
// FeedbackScreen.js
const handleSaveWithRetry = async (retryCount = 0) => {
  const MAX_RETRIES = 2;

  try {
    const sessionId = await saveSessionToFirestore();

    Alert.alert(
      'ä¿å­˜å®Œäº†',
      'ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚',
      [
        {
          text: 'å±¥æ­´ã‚’è¦‹ã‚‹',
          onPress: () => navigation.navigate('History'),
        },
        { text: 'OK', style: 'cancel' }
      ]
    );
  } catch (error) {
    console.error('[Feedback] Save error:', error);

    if (retryCount < MAX_RETRIES) {
      // ãƒªãƒˆãƒ©ã‚¤ã‚’ææ¡ˆ
      Alert.alert(
        'ä¿å­˜ã‚¨ãƒ©ãƒ¼',
        `ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n\n${error.message}\n\nã‚‚ã†ä¸€åº¦è©¦ã—ã¾ã™ã‹ï¼Ÿ`,
        [
          {
            text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
            style: 'cancel',
          },
          {
            text: 'ãƒªãƒˆãƒ©ã‚¤',
            onPress: () => handleSaveWithRetry(retryCount + 1),
          }
        ]
      );
    } else {
      // æœ€å¤§ãƒªãƒˆãƒ©ã‚¤å›æ•°ã«é”ã—ãŸ
      Alert.alert(
        'ä¿å­˜ã‚¨ãƒ©ãƒ¼',
        `ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n\n${error.message}\n\nå¾Œã§å±¥æ­´ç”»é¢ã‹ã‚‰å†åº¦ä¿å­˜ã§ãã¾ã™ã€‚`,
        [{ text: 'OK' }]
      );
    }
  }
};
```

---

### **ã‚¿ã‚¹ã‚¯3: ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚é–“ã®è¨˜éŒ²ï¼ˆ30åˆ†ï¼‰**

#### **3-1. SessionContextã«æ™‚é–“è¨ˆæ¸¬æ©Ÿèƒ½ã‚’è¿½åŠ **

```javascript
// SessionContext.js
const [sessionStartTime, setSessionStartTime] = useState(null);

// ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚
const startSession = (sceneId, sceneName) => {
  setSessionStartTime(Date.now());
  setCurrentSession({
    sceneId,
    sceneName,
    qaList: [],
    feedback: null,
  });
};

// ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜æ™‚ã«çµŒéæ™‚é–“ã‚’è¨ˆç®—
const saveSessionToFirestore = async () => {
  try {
    // ...

    // ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚é–“ã‚’è¨ˆç®—ï¼ˆç§’å˜ä½ï¼‰
    const duration = sessionStartTime
      ? Math.floor((Date.now() - sessionStartTime) / 1000)
      : 0;

    const sessionData = {
      sceneId: currentSession.sceneId,
      sceneName: currentSession.sceneName,
      qaList: currentSession.qaList,
      feedback: currentSession.feedback,
      duration, // è¿½åŠ 
    };

    // ...
  } catch (error) {
    // ...
  }
};
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆé …ç›®

### **åŸºæœ¬å‹•ä½œãƒ†ã‚¹ãƒˆ**
- [ ] FeedbackScreenãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å†…å®¹ï¼ˆã‚µãƒãƒªãƒ¼ãƒ»è‰¯ã‹ã£ãŸç‚¹ãƒ»æ”¹å–„ç‚¹ãƒ»åŠ±ã¾ã—ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã€Œå±¥æ­´ã«ä¿å­˜ã€ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒä¿å­˜ã•ã‚Œã‚‹
- [ ] ä¿å­˜æˆåŠŸæ™‚ã«ã‚¢ãƒ©ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ä¿å­˜æˆåŠŸå¾Œã€Firebase Consoleã§ãƒ‡ãƒ¼ã‚¿ãŒç¢ºèªã§ãã‚‹
- [ ] ã€Œã‚‚ã†ä¸€åº¦ç·´ç¿’ã€ãƒœã‚¿ãƒ³ã§SceneSelectionã«é·ç§»ã™ã‚‹
- [ ] ã€Œãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹ã€ãƒœã‚¿ãƒ³ã§Homeã«é·ç§»ã™ã‚‹

### **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ**
- [ ] ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼æ™‚ã«é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ä¿å­˜å¤±æ•—æ™‚ã«ãƒªãƒˆãƒ©ã‚¤ã®é¸æŠè‚¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] æœ€å¤§ãƒªãƒˆãƒ©ã‚¤å›æ•°ã«é”ã—ãŸå ´åˆã®å‡¦ç†ãŒæ­£ã—ã„

### **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒ†ã‚¹ãƒˆ**
- [ ] ä¿å­˜ã•ã‚ŒãŸã‚»ãƒƒã‚·ãƒ§ãƒ³ã«å…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹
- [ ] ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚é–“ï¼ˆdurationï¼‰ãŒæ­£ã—ãè¨˜éŒ²ã•ã‚Œã‚‹
- [ ] userIdãŒæ­£ã—ãä¿å­˜ã•ã‚Œã‚‹
- [ ] createdAt/updatedAtãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚‹

### **UI/UXãƒ†ã‚¹ãƒˆ**
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã¯ä¿å­˜ãƒœã‚¿ãƒ³ãŒç„¡åŠ¹åŒ–ã•ã‚Œã‚‹
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- [ ] ãƒœã‚¿ãƒ³ãŒè¦‹ã‚„ã™ãé…ç½®ã•ã‚Œã¦ã„ã‚‹

---

## â±ï¸ æ‰€è¦æ™‚é–“

| ã‚¿ã‚¹ã‚¯ | æ™‚é–“ |
|--------|------|
| **FeedbackScreen UIå®Ÿè£…** | 2æ™‚é–“ |
| **SessionContextä¿å­˜æ©Ÿèƒ½è¿½åŠ ** | 1æ™‚é–“ |
| **ä¿å­˜ãƒœã‚¿ãƒ³å®Ÿè£…** | 1æ™‚é–“ |
| **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°** | 1æ™‚é–“ |
| **ãƒ†ã‚¹ãƒˆï¼ˆä¿å­˜ãƒ»ã‚¨ãƒ©ãƒ¼å‡¦ç†ï¼‰** | 1æ™‚é–“ |
| **ãƒ‡ãƒãƒƒã‚°** | 0.5æ™‚é–“ |
| **åˆè¨ˆ** | ç´„6.5æ™‚é–“ |

---

## ğŸ”§ Day 13å®Œäº†åŸºæº–

### âœ… å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

#### **FeedbackScreenå®Ÿè£…**
- [ ] FeedbackScreen.jsä½œæˆ
- [ ] ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è¡¨ç¤ºUIå®Ÿè£…
- [ ] ä¿å­˜ãƒœã‚¿ãƒ³å®Ÿè£…
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºå®Ÿè£…
- [ ] ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºå®Ÿè£…

#### **SessionContextæ‹¡å¼µ**
- [ ] saveSessionToFirestore() å®Ÿè£…
- [ ] ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚é–“è¨ˆæ¸¬æ©Ÿèƒ½è¿½åŠ 
- [ ] ä¿å­˜çŠ¶æ…‹ç®¡ç†ï¼ˆsaving, saveErrorï¼‰

#### **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**
- [ ] ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼å¯¾å¿œ
- [ ] æ¨©é™ã‚¨ãƒ©ãƒ¼å¯¾å¿œ
- [ ] ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½å®Ÿè£…

#### **ãƒ†ã‚¹ãƒˆ**
- [ ] ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜ãƒ†ã‚¹ãƒˆæˆåŠŸ
- [ ] Firebase Consoleã§ãƒ‡ãƒ¼ã‚¿ç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å‹•ä½œç¢ºèª
- [ ] UI/UXå‹•ä½œç¢ºèª

---

## ğŸ“ é‡è¦ãªæŠ€è¡“ãƒ‘ã‚¿ãƒ¼ãƒ³

### **SessionContextã§ã®Firestoreçµ±åˆ**

```javascript
// SessionContext.js
import { saveSession } from '../services/firestoreService';
import { useAuth } from './AuthContext';

const SessionProvider = ({ children }) => {
  const { user } = useAuth();
  const [currentSession, setCurrentSession] = useState(null);
  const [saving, setSaving] = useState(false);
  const [saveError, setSaveError] = useState(null);

  const saveSessionToFirestore = async () => {
    const sessionId = await saveSession(user.uid, currentSession);
    return sessionId;
  };

  return (
    <SessionContext.Provider value={{
      currentSession,
      setCurrentSession,
      saveSessionToFirestore,
      saving,
      saveError,
    }}>
      {children}
    </SessionContext.Provider>
  );
};
```

### **FeedbackScreenã§ã®ä¿å­˜å‡¦ç†**

```javascript
// FeedbackScreen.js
const { saveSessionToFirestore, saving } = useSession();

const handleSave = async () => {
  try {
    const sessionId = await saveSessionToFirestore();
    Alert.alert('ä¿å­˜å®Œäº†', 'ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚');
  } catch (error) {
    Alert.alert('ä¿å­˜ã‚¨ãƒ©ãƒ¼', error.message);
  }
};
```

---

## ğŸš€ æ¬¡å›ï¼ˆDay 14ï¼‰äºˆå®š

### **Day 14: å±¥æ­´æ©Ÿèƒ½**
- HistoryScreenå®Ÿè£…ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§è¡¨ç¤ºï¼‰
- SessionDetailScreenå®Ÿè£…ï¼ˆè©³ç´°è¡¨ç¤ºï¼‰
- Pull to Refresh
- å‰Šé™¤æ©Ÿèƒ½
- å‰Šé™¤ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
- æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå‡¦ç†

---

## ğŸ“ ã“ã‚Œã¾ã§ã®å­¦ç¿’æˆæœ

### **Week 1-2ã§ç¿’å¾—ã—ãŸæŠ€è¡“**

1. **React Native + Expoé–‹ç™º**
   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ âœ…
   - Navigation âœ…
   - Context API âœ…
   - Hooksï¼ˆuseState, useEffect, useRefï¼‰âœ…

2. **Firebaseçµ±åˆ**
   - Authentication âœ…
   - Cloud Functions âœ… (generateQuestions, generateFeedback, transcribeAudio)
   - Firestore âœ… (Day 12å®Œäº†ã€Day 13ã§å®Ÿç”¨åŒ–)

3. **OpenAI APIæ´»ç”¨**
   - gpt-4o-miniï¼ˆè³ªå•ç”Ÿæˆãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç”Ÿæˆï¼‰âœ…
   - Whisper APIï¼ˆéŸ³å£°æ–‡å­—èµ·ã“ã—ï¼‰âœ…

4. **ãƒã‚¤ãƒ†ã‚£ãƒ–æ©Ÿèƒ½**
   - éŸ³å£°éŒ²éŸ³ï¼ˆexpo-avï¼‰âœ…
   - ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ï¼ˆexpo-file-systemï¼‰âœ…
   - æ¨©é™ç®¡ç† âœ…

5. **é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹**
   - Git/GitHub âœ…
   - EAS Build âœ…
   - Development Build âœ…
   - ãƒ‡ãƒãƒƒã‚°ãƒ»ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° âœ…

6. **ãƒ‡ãƒ¼ã‚¿ç®¡ç†**
   - Firestore CRUDæ“ä½œ âœ… (Day 12)
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ« âœ… (Day 12)
   - ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ âœ…

---

## ğŸ“ é–‹ç™ºã‚µãƒãƒ¼ãƒˆæƒ…å ±

### **ãƒªãƒã‚¸ãƒˆãƒª**
- GitHub: https://github.com/fanta1127/business-communication-trainer/
- ãƒ–ãƒ©ãƒ³ãƒ: `day10-development-build`
- æœ€æ–°ã‚³ãƒŸãƒƒãƒˆ: `4fc460a`

### **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**
- Expo: https://docs.expo.dev/
- Firebase: https://firebase.google.com/docs
- Firestore: https://firebase.google.com/docs/firestore
- React Navigation: https://reactnavigation.org/docs/getting-started

### **ãƒ“ãƒ«ãƒ‰æƒ…å ±**
- EAS Project ID: `d8957a17-7f57-454d-b344-0c7202fd1168`
- Android Build ID: `c9c92a50-6a10-4ef9-8c27-21b37614c7d2`
- iOS: Xcode Local Buildï¼ˆç„¡æ–™Personal Teamï¼‰

### **ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±**
- Android: å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆæˆåŠŸ âœ…
- iOS: å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆæˆåŠŸ âœ…
- Bundle ID: `com.fanta1127.businesstrainer`

---

## ğŸ¯ Day 13é–‹å§‹æº–å‚™ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### **ç’°å¢ƒç¢ºèª**

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ç§»å‹•
cd ~/Desktop/Coding_Practice/Expo-app/BusinessTrainer

# ãƒ–ãƒ©ãƒ³ãƒç¢ºèª
git branch
# day10-development-build

# æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª
git status
git log --oneline -5
```

### **å‰ææ¡ä»¶ç¢ºèª**

Day 13ã‚’é–‹å§‹ã™ã‚‹å‰ã«ã€ä»¥ä¸‹ãŒå®Œäº†ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª:
- âœ… Day 12å®Œäº†ï¼ˆfirestoreService.jså®Ÿè£…æ¸ˆã¿ï¼‰
- âœ… Firestoreãƒ«ãƒ¼ãƒ«ãƒ»ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ‡ãƒ—ãƒ­ã‚¤æ¸ˆã¿
- âœ… Firebase Console ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèªæ¸ˆã¿
- âœ… SessionContextå®Ÿè£…æ¸ˆã¿
- âœ… PracticeScreenå®Ÿè£…æ¸ˆã¿ï¼ˆè³ªå•ç”Ÿæˆãƒ»å›ç­”å…¥åŠ›ï¼‰

---

## âœ¨ Week 2ã®ç›®æ¨™ï¼ˆDay 13å®Ÿæ–½æ™‚ç‚¹ï¼‰

### **å®Œäº†é …ç›®** âœ…
- [x] Day 9: ã‚²ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰å»ƒæ­¢ + ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯API
- [x] Day 10: Android Development Build
- [x] Day 10.5: iOSå®Ÿæ©Ÿãƒ†ã‚¹ãƒˆç’°å¢ƒæ§‹ç¯‰
- [x] Day 11: éŸ³å£°æ–‡å­—èµ·ã“ã—æ©Ÿèƒ½ï¼ˆWhisper APIï¼‰
- [x] Day 12: Firestoreãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### **ä»Šé€±ã®æ®‹ã‚Šã‚¿ã‚¹ã‚¯** â³
- [ ] Day 13: ãƒ‡ãƒ¼ã‚¿ä¿å­˜æ©Ÿèƒ½ â† æ¬¡å›
- [ ] Day 14: å±¥æ­´æ©Ÿèƒ½

### **Week 2çµ‚äº†æ™‚ã®ç›®æ¨™**
```
âœ… AIæ©Ÿèƒ½å®Œå…¨çµ±åˆï¼ˆè³ªå•ç”Ÿæˆãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ»æ–‡å­—èµ·ã“ã—ï¼‰
âœ… Android/iOSä¸¡å¯¾å¿œ
âœ… Firestoreãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«æ§‹ç¯‰
â³ ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒ»å±¥æ­´æ©Ÿèƒ½
â³ ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã§å‹•ä½œ
```

---

## ğŸš€ Day 13: ãƒ‡ãƒ¼ã‚¿ä¿å­˜æ©Ÿèƒ½å®Ÿè£…ã¸ï¼

**ç·´ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†å¾Œã€Firestoreã«è‡ªå‹•ä¿å­˜ã™ã‚‹æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ï¼**

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒéå»ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’æŒ¯ã‚Šè¿”ã‚Šã€æˆé•·ã‚’è¿½è·¡ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

**ãƒ‡ãƒ¼ã‚¿ä¿å­˜æ©Ÿèƒ½ã‚’å®Ÿç¾ã—ã¾ã—ã‚‡ã†ï¼** ğŸ¯

---

**æœ€çµ‚æ›´æ–°**: Day 12å®Œäº†ï¼ˆ2025å¹´10æœˆ26æ—¥ï¼‰
**æ¬¡å›ä½œæ¥­**: Day 13 - ãƒ‡ãƒ¼ã‚¿ä¿å­˜æ©Ÿèƒ½å®Ÿè£…
**Week 2ç›®æ¨™**: ãƒ‡ãƒ¼ã‚¿ç®¡ç†å®Œå…¨å®Ÿè£…ã¸
